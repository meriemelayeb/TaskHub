<!-- HEADER -->
<div class="header-bar">
  <div class="header-left">
    <img src="assets/taskhub.png" alt="Logo" class="logo-img">
    <span class="logo-text">TaskHub</span>
  </div>

  <div class="header-right">
    <div class="avatar">{{ initials }}</div>
    <button class="header-btn logout-btn" (click)="logout()">Déconnexion</button>
  </div>
</div>

<div class="admin-container">
    <!-- ----------- RÉUNIONS ----------- -->
    <div class="card">
        <h2>Réunions</h2>

        <div class="top-actions">
          <select (change)="filtrerPar($event)">
            <option value="all">Filtrer par</option>
            <option value="jour">Aujourd'hui</option>
            <option value="semaine">Cette semaine</option>
            <option value="mois">Ce mois</option>
          </select>
        </div>

        <table>
        <thead>
          <tr>
            <th>Réunion</th>
            <th>Description</th>
            <th>Date</th>
            <th>État</th>
          </tr>
        </thead>

        <tbody>
        <tr *ngFor="let reu of reunionsFiltrees">
    <td>{{ reu.nom }}</td>
    <td>{{ reu.description }}</td>
    <td>{{ reu.date | date: 'dd/MM/yyyy' }}</td>
    <td>
        <span [ngClass]="getReunionClass(reu.etat)" class="badge">
              {{ reu.etat }}
            </span>
    </td>

        <tr *ngIf="reunions.length === 0">
            <td colspan="6">Aucune réunion.</td>
        </tr>

    </tbody>
    </table>
    
  </div>

  <!-- ------ MES TÂCHES ----------- -->
  <div class="card">
    <h2>Mes tâches</h2>

    <table>
      <thead>
        <tr>
          <th>Tâche</th>
          <th>Description</th>
          <th>État</th>
          <th>Changer état</th>
          <th>Supprimer</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let tache of tasks">
          <td>{{ tache.title }}</td>
          <td>{{ tache.description }}</td>

          <td>
            <span class="badge" [ngClass]="getTaskClass(tache.status)">
              {{ tache.status }}
            </span>
          </td>

          <!-- Update -->
          <td>
            <select [(ngModel)]="tache.status"
                    (change)="changeTaskStatus(tache, tache.status)">
              <option *ngFor="let s of statusOptions" [value]="s">{{ s }}</option>
            </select>
          </td>

          <!-- Supprimer -->
          <td>
            <button class="delete-btn" 
                    [disabled]="tache.status !== 'Terminée'" 
                    (click)="supprimerTache(tache.id)">
              Supprimer
            </button>
          </td>
        </tr>

        <tr *ngIf="tasks.length === 0">
          <td colspan="6">Aucune tâche assignée.</td>
        </tr>
      </tbody>
    </table>
  </div>

</div>